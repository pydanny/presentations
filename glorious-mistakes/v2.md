autoscale: true
footer: @pydanny / Kraken :octopus:
slidenumbers: true
slide-transition: true

# [fit] Glorious Mistakes

# [fit] 25 years of Python Errors

## Daniel Roy Greenfeld

---

# [fit] Glorious Mistakes

# [fit] 25 years of Python Errors

## Daniel Roy Greenfeld

---

# [fit] Hello Lithuania!

![inline full](assets/Flag_of_Lithuania.svg.png)

---

Hello Lithuania!

# First family member in

# [fit] 100 years


---

# My mother loves ≈†altibar≈°ƒçiai[^1]

[.column]

![inline full](assets/beet-soup.jpg)

[.column]

### [fit] In her honor I want to try it

### [fit] and other Lithuanian goodies

[^1]: shalt-eh-barsh-chay

---

# [fit] Let's do this!

---

[.background-color: #FF0000]
[.header: #FFFFFF, Avenir Next Bold]
[.text: #FFFFFF, Avenir Next Bold]

# 1.

# [fit] Missed opportunity of lifetime

---

# 1999: Could have worked at Zope Corp

![](assets/long-hair.png)

---

# 1999: Could have worked at Zope Corp

![inline full](assets/long-hair.png)

---

# [fit] Scheduled an interview

---

# [fit] At a :snake: company!

---

![inline](assets/Zope.svg)

---

# [fit] However,

---

# [fit] this is 1999

---

![inline full](assets/long-hair.png)

---

# [fit] :snake:

# is a weird, obscure language

---

![inline full](assets/arlington-to-fredericksburg.png)

---


#  1999: Real coders use Java Enterprise! 

[.column]

Big companies excited about Java

Unnecessary complexity was a virtue

(more on that later)

[.column]

![inline](assets/1024px-Jakarta_ee_logo_schooner_color_stacked_default.svg.png)

---

# Senior dev:

# "Python is a MISTAKE"

---

[.background-color: #FF0000]
[.header: #FFFFFF, Avenir Next Bold]
[.text: #FFFFFF, Avenir Next Bold]

# [fit] I cancelled

# [fit] the interview!

---

## What I missed

## by cancelling an interview

![](assets/Guido_van_Rossum_OSCON_2006.jpg)

---

[.column]

### Zope was hiring most of the Python devs

![inline full](assets/zope-z-logo.png)

[.column]

### Including GvR in 2000!

![inline full](assets/Guido_van_Rossum_OSCON_2006.jpg)



---

[.column]

# At the start of my career  I lost the chance to work with Guido van Rossum

[.column]

![inline full](assets/Guido_van_Rossum_OSCON_2006.jpg)

---

[.column]

At a time when Python was so new Guido (and others experts there) spent untold hours lifting up people like me.

^ This would have been a huge career jump for me, instead of languishing for 7 years in enterprise environments.

[.column]

![inline full](assets/Guido_van_Rossum_OSCON_2006.jpg)

---

## Lessons Learned

1. Always go to the interview!
2. Don't listen to people who dismiss Python

<sub>[daniel.feldroy.com/posts/2010-01-my-pre-history-with-plone](https://daniel.feldroy.com/posts/2010-01-my-pre-history-with-plone)</sub>

---

# [fit] Second Mistake

---

[.background-color: #FF0000]
[.header: #FFFFFF, Avenir Next Bold]
[.text: #FFFFFF, Avenir Next Bold]

# 2.

# Unnecessary Sophistication

---

## Late 1990s to 2008-ish

# The Age of Zope

---

# What is Zope?

![inline full](assets/zope-z-logo.png)

---

# What is Zope?

- A consulting company

---

[.build-lists: true]

# What is Zope?

- A web framework with many features
    - Invented URL routing (no more `users.pl` or `accounts.cfm`)
    - Built-in admin
    - NoSQL Database
    - Typing
    - Many more features

---

# Zope dominated Python

- Zope was synonymous with Python web
- Early PyCon US had a Zope track

---

# What happened to Zope?

Created in the era where complexity and XML was added to projects to prove their worth and sell products about the project.

---

Making things public using Zope[^3]

```xml
<browser:page name="captcha.wav"
  for="captchad.interfaces.ICaptchaContainer"
  class="captchad.browser.folder.CaptchaAudio"
  permission="zope.Public" />

<browser:page
  name="captcha.png"
  for="captchad.interfaces.ICaptchaContainer"
  class="captchad.browser.folder.CaptchaImage"
  permission="zope.Public" />
```

[^3]: [https://daniel.feldroy.com/posts/2007-11-im-serving-out-image-and-audio-files](daniel.feldroy.com/posts/2007-11-im-serving-out-image-and-audio-files)

---

# What happened to Zope?

Becoming effective with Zope as a coder required:

- paid instruction or employment with core contributors
- xml configuration
- A large investment of time


---

# What happened to Zope?

Frameworks using Zope added too much cleverness

- Plone
- Nuxeo

(The large investment of time became huge)

---

# Zope Hiring Story at NASA

[.column]

In 2008 at NASA my team rejected a candidate in part because he made the impossible claim to have learned, coded, and deployed a Zope-powered system within a month.

[.column]

![inline](assets/280_NASAMeatball.jpg)

---

# Example Zope Gotcha

Impossible claim: Zope had too many one-off quirks:

```python
from datetime.datetime import DateTime
from zope.schema import Datetime
from zope.schema import TextLine
```

[daniel.feldroy.com/posts/2007-11-head-meets-desk](https://daniel.feldroy.com/posts/2007-11-head-meets-desk)

---

[.code-highlight: 2]

# Example Zope Gotcha

Impossible claim: Zope had too many one-off quirks:

```python
from datetime.datetime import DateTime
from zope.schema import Datetime  # <-- Titlecase
from zope.schema import TextLine
```

[daniel.feldroy.com/posts/2007-11-head-meets-desk](https://daniel.feldroy.com/posts/2007-11-head-meets-desk)

---

# Example Zope Gotcha

Impossible claim: Zope had too many one-off quirks:

```python
from datetime.datetime import DateTime
from zope.schema import Datetime  # <-- Titlecase
from zope.schema import TextLine  # <-- Camelcase
```

[daniel.feldroy.com/posts/2007-11-head-meets-desk](https://daniel.feldroy.com/posts/2007-11-head-meets-desk)

---

[.build-lists: true]

## Unfortunate Zope community discourse

1. Coder: "This is really hard and the docs are incomplete"

2. Contributor 1: "Take my paid class to understand it"

3. Coder: "Can we not use XML so much?"

4. Contributor 2: "Here's more complexity and XML!"

5. Coder: "Bah! I'm going to use something else"

---

## The something else was...

---

# [fit] Django

---

[.build-lists: true]

# My Zope story

1. 2007 - Zope is kind of neat. Python and ZODB rocks.
2. 2008 - Neat, but easy things are hard and hard things impossible
3. 2009 - This Django stuff allows me to get stuff done on schedule.

---

# The community

# drifted away



---

# Lessons learned

1. Complexity as a business model is bad
2. Overcomplicating your Python project to sell training and consulting and ensure job security bites you in the end

<!-- ---

# Some footnotes about Zope

1. Zope appears to have removed some of the unnecessary complexity
1. typing.Protocol is directly inspired Zope subtypes
1. I fond memories of working directly with ZPT and ZODB -->

---

# [fit] Third Mistake

---

[.background-color: #FF0000]
[.header: #FFFFFF, Avenir Next Bold]
[.text: #FFFFFF, Avenir Next Bold]

# 3.

# Overly clever hacks


---

# My obnoxiously clever hack

I defined my own numeric variables called `true` and `false`

```python
# business/logic.py
true = 0
false = 1
```

---

Altered truthiness from Python `True` and `False` booleans

```python
# business/logic.py
true = 0  # Not truthy
false = 1 # truthy
```


---

### Obnoxiously Clever!

```python
from business import logic, true, false

def process_result(vendorResponse):
    result = None
    for res in vendorResponse.results:
        if res.status == false:
            result = logic(res)
        if result.is_valid == True
            break
    return result
```

---

[.code-highlight: 6,8]

### My code confused everyone around (including me)

```python
from business import logic, true, false

def process_result(vendorResponse):
    result = None
    for res in vendorResponse.results:
        if res.status == false:  # no code highlighting!
            result = logic(res)
        if result.is_valid == True
            break
    return result
```

--- 

# What I broke

# by reversing booleans


---

[.background-color: #000000]
[.header: #FFFFFF]


## What I broke by reversing booleans

![inline full](assets/production.png)

---

[.background-color: #000000]
[.header: #FFFFFF]

## Repeatedly

![inline full](assets/production.png)

---

[.background-color: #000000]
[.header: #FFFFFF]

## Often

![inline full](assets/production.png)

---

## A better approach

```python
class VendorStatus(enum):
    POSITIVE: int = 0
    NEGATIVE: int = 1
```

---

## A better approach

[.code-highlight: 6,8]

```python
from business import logic, VendorStatus

def process_result(vendorResponse):
    result = None
    for res in vendor_response.results:
        if res.status == VendorStatus.NEGATIVE:
            result = logic(res)
        if result.is_valid == True
            break
    return result
```

---

## What I learned:

1. Your Python code should be intuitive

2. Your code shouldn't require three cups of coffee to be understood

3. If it makes you think too hard, rewrite it such that a beginner can understand it

<!-- 1. Business rules are often complex
2. Code should remain as simple as possible
3. Be wary of coding culture that encourages complexity -->

---

# Fourth Mistake

---

[.background-color: #FF0000]
[.header: #FFFFFF, Avenir Next Bold]
[.text: #FFFFFF, Avenir Next Bold]

# 4.

# Django Cleverness

---

## 2012-era Django

[.column]

Dr. Ian Malcolm, Mathematician/Chaotician @ Jurassic Park


[.column]

![inline](https://media.giphy.com/media/mCClSS6xbi8us/giphy.gif)


---

# Cleverness of the era

---

## Mistake: Database configuring installed apps

```sql
select app_path from apps where app_id = environ['APP_ID'];
```

```python
# Dynamically loaded INSTALL_APPS
INSTALLED_APPS += [x['app_path'] for x in records]
```

---

# Mistake: Removing None 

For languages without garbage collection, Tony Hoare said null pointer exceptions are a billion dollar mistake.

People added a clever class in a garbage collected language (Python) to replace it!

```python
class NoneError(Exception):
    # 50 lines of code I won't publish went here
```

Hint: This isn't helping

---

### Mistake: Metaclasses instead of object inheritance

Unless you are writing a framework you probably will never use metaclasses.

---

[.build-lists: true]

### Mistake: Cache-powered concrete models

- Caching to handle data duplication
- But cache invalidation is hard

TODO: Two hard things in computer science

---

[.build-lists: true]

### Mistake: Generic Foreign Keys to connect every model

- Clever Tests to account for lack of strong foreign keys
- Followed by lots and lots and lots of data cleanup

---

# [fit] So much cleverness!

---

# [fit] That was sarcasm

---

# [fit] The reality

---

[.background-color: #FF0000]
[.header: #FFFFFF, Avenir Next Bold]
[.text: #FFFFFF, Avenir Next Bold]

# There were a lot of failing Django projects

---

[.build-lists: true]

# Most of our work was underpaid rescue work for Django

1. Devs code themselves into a corner using Django
2. Funding spent, devs leave
2. We get invited to fix the problems on shoestring budgets

---

# If only people stopped the clever coding!

# [fit] :angry:

---

# There needs to be a guide for keep things reasonable

# [fit] ü§î

---

# Let's talk it over ice cream

# [fit] :icecream::icecream:

---

# Two Scoops of Django!

TODO: Put in all Two Scoops of Django covers

---

# Lesson Learned

We can address problems by writing and coding

---

[.background-color: #FF0000]
[.header: #FFFFFF, Avenir Next Bold]
[.text: #FFFFFF, Avenir Next Bold]

# 5.

# A New Complexity

---

# [fit] Python Types
<br>

# Problem or not?

---

> "I like types but they aren't always good"
<br><br>

> David Seddon

---

[.build-lists: true]

## Types can add significantly to cognitive load

- Simple types can make things easier

- But it's the edge cases that hurt

- Django is an edge case for Python types 

---

# For control of behaviors they are bliss

- FastAPI
- pydantic

---

# Types are decent at catching bugs

---

# [fit] But

---

Saying:

# [fit] "Types mean we can

# [fit] avoid writing so many tests"

---

Is the same as:


# [fit] "The ORM means our 

# [fit] security is perfect" [^4]

[^4]: Crypto-dude at a hackathon in 2014

---

# Types can add complexity

---

### I love protocols but admit for some this might be 'clever'

[.column]

```python
class Child(Protocol):
      name: str

      def play(self, game): ...

class Uma:
      name: int = 5

      def play(self, game):
        # Playtime goes here    

def playground(child: Child) -> None: ...
```

[.column]

```python
playground(Uma())  

# error: Argument 1 to "playground" has 
# incompatible type "Uma"; expected "Child"
    # note:  Following member(s) of "Uma" have conflicts:
    # note:      name: expected "str", got "int"
```

[^5]: [mypy.readthedocs.io/en/stable/protocols.html#invariance-of-protocol-attributes](https://mypy.readthedocs.io/en/stable/protocols.html#invariance-of-protocol-attributes)

---

### `Zope.interface` preceded `typing.Protocol`

Zope had similar features as modern typing. 
Zope had one of the first widely used approaches to structural subtyping in Python[^6]

[.column]

```python
from zope.interface import Interface, Attribute

class IChild(Interface):

    name = Attribute("Name of person")

    def play(game):
        """Do some play"""
```

[.column]

```python
from zope.interface import implementer

@implementer(IChild)
class Child:

    name = 'Uma'

    def play(self, game):
        return work.start()
```

[^6]: https://peps.python.org/pep-0544/

---

# Mypy is slow

## (Yes, I know there is a daemon)

1. If no cache, 93 lines of code takes me 5s
2. What if I'm testing millions of lines of Python

---

# Upgrading mypy

# can be really hard

---

# Pro-tip:

#¬†keep mypy up-to-date

---

[.background-color: #FF0000]
[.header: #FFFFFF, Avenir Next Bold]
[.text: #FFFFFF, Avenir Next Bold]

# Thought:

## Are Python types the Zope of the 2020s?

---

# Problems with Python types

- Adding types to everything forces in the edge cases
- Sometimes you have to be very clever to get mypy to pass
- Typechecking is slow

---

# I don't think so

---

[.column]

# [fit] Unlike

[.column]

![inline full](assets/zope-z-logo.png)

---

# ...python typing has escape hatches

```python
from tying import Any

MyModel.name == generic_value  # type: ignore
```

---

[.background-color: #FF0000]
[.header: #FFFFFF, Avenir Next Bold]
[.text: #FFFFFF, Avenir Next Bold]

# 6.

# Not using Python for Good

---

# [fit] My work used for good

- People using it to land jobs
- Building dream projects
- Various community service efforts
  - Health care firms
  - Charities and non-profits
  - Catching terrorist bombers (Boston Marathon 2013)

---

[.background-color: #FF0000]
[.header: #FFFFFF, Avenir Next Bold]
[.text: #FFFFFF, Avenir Next Bold]

# [fit] But what about when

# [fit] my work is used for

# [fit] evil?

---

[.background-color: #FF0000]
[.header: #FFFFFF, Avenir Next Bold]
[.text: #FFFFFF, Avenir Next Bold]

# [fit] My work was used for evil!

- Logistics for nations who oppress their people
- Commercial ventures to spy on private citizens
- Promotion of flat earth / no moon landing theory
- App to sell wildlife illegally
- Lots more

# :rage:

---

# [fit] Ethics in Code

[.column]

Dr. Ian Malcolm, Mathematician/Chaotician @ Jurassic Park


[.column]

![inline](https://media.giphy.com/media/mCClSS6xbi8us/giphy.gif)

---

# [fit] Questions we should ask

# [fit] of every employer/client

---

# [fit] Who is helped?

---

# [fit] Who is hurt?

---

# [fit] Does this project:

- Promote falsehood over truth?
- Subvert election processes?
- Intrude on individual sovreignty?
- Spew unnecessary carbon or methane into the atmosphere?

---

# [fit] In other words,

# [fit] does it hurt the future?

---

Let's try this on:

# [fit] Climate Change

---

# Climate change

- A series of incrementally hotter years
- Incredible heat waves around the world
- The South Western USA is under severe water restrictions
- Droughts in normally wet places

---

# Where is this? Southern California?

![inline fill](https://upload.wikimedia.org/wikipedia/commons/thumb/e/e4/Huveaune_Aubagne_dry_bed.jpg/2560px-Huveaune_Aubagne_dry_bed.jpg)

---

# No - This is Auburge, France in 2022

![inline fill](https://upload.wikimedia.org/wikipedia/commons/thumb/e/e4/Huveaune_Aubagne_dry_bed.jpg/2560px-Huveaune_Aubagne_dry_bed.jpg)

---

# [fit] It doesn't have to be this way...

---

## [fit] ...and here's why

---

![inline](assets/programming-supertpowers.png)

---

# [fit] Programming Gives Us Super Powers

[.column]

- To improve the lives of ourselves and our families
- To build new and innovative businesses
- To share ideas and knowledge around the world

[.column]

---

[.column]

# [fit] We have the power 

# [fit] to save the planet



[.column]


![inline full](https://upload.wikimedia.org/wikipedia/commons/thumb/c/cb/The_Blue_Marble_%28remastered%29.jpg/1920px-The_Blue_Marble_%28remastered%29.jpg)

---

[.background-color: #FF0000]
[.header: #FFFFFF, Avenir Next Bold]
[.text: #FFFFFF, Avenir Next Bold]

#### My impact on climate as an individual is tiny[^7]

[^7]: I am responsible for myself and ~1 other people

---

[.background-color: #00FF00]
[.header: #000000, Avenir Next Bold]
[.text: #000000, Avenir Next Bold]

# [fit] My climate impact as a software developer

# [fit] working on decarbonization and electrification

---

[.background-color: #00FF00]
[.header: #000000, Avenir Next Bold]
[.text: #000000, Avenir Next Bold]

# [fit] Gigantic[^8]

[^8]: I am responsible for ~60,000 people on renewable energy

---

[.background-color: #00FF00]

![inline](https://daniel.feldroy.com/images/uma-2020.png)

# [fit] This is going to be my legacy

---

[.background-color: #00FF00]

#### Join me in the good fight against climate change

[.column]

![](assets/climatebase.jpeg)

[climatebase.org](https://climatebase.org)

[.column]

![](assets/kraken-logo.png)

[octopus.energy/careers](https://octopus.energy/careers/)

---

# About Me

[.column]

Daniel Roy Greenfeld

Software Artisan @ Kraken Tech

Coder, Author, Leader

Husband of Audrey Roy Greenfeld

Father

Superhero saving the planet

[.column]

![fit](assets/facebook-avatar.jpg)

---

[.background-color: #00FF00]
[.header: #000000, Avenir Next Bold]
[.text: #000000, Avenir Next Bold]

# What will be your legacy?

---

[.background-color: #FF0000]
[.header: #FFFFFF, Avenir Next Bold]

# Making a billionaire another billion?

---

# [fit] Or

---

[.background-color: #00FF00]
[.header: #000000, Avenir Next Bold]
[.text: #000000, Avenir Next Bold]

# [fit] Improving

# [fit] the

# [fit] world?

---

# About Me

[.column]

Daniel Roy Greenfeld

Software Artisan @ Kraken Tech

Coder, Author, Leader

Husband of Audrey Roy Greenfeld

Father

Superhero saving the planet

[.column]

![fit](assets/facebook-avatar.jpg)

---

[.background-color: #FFFFFF]
[.header: #0000000, Avenir Next Bold]
[.text: #000000, Avenir Next Bold]

# [fit] Any

# [fit] Questions

# [fit] ?
