autoscale: true
footer: @pydanny / Kraken :octopus:
slidenumbers: true
slide-transition: true

# [fit] Glorious Mistakes

# [fit] 25 years of Python Errors

## Daniel Roy Greenfeld

---

# [fit] Glorious Mistakes

# [fit] 25 years of Python Errors

## Daniel Roy Greenfeld

---

# [fit] Hello Lithuania!

![inline full](assets/Flag_of_Lithuania.svg.png)

---

Hello Lithuania!

# First family member in

# [fit] 100 years


---

# My mother loves Šaltibarščiai[^1]

![inline full](assets/beet-soup.jpg)

### In her honor I want to try the best Vilnius have to offer.

[^1]: shalt-eh-barsh-chay

---

# [fit] Let's do this!

---

# I want to try the cheese

![inline full](assets/lithuanian-cheese.jpeg)

---

# [fit] Let's do this!
---

# [fit] First Mistake

---

[.background-color: #FF0000]
[.header: #FFFFFF, Avenir Next Bold]
[.text: #FFFFFF, Avenir Next Bold]

# 1.

# [fit] Missed opportunity of lifetime

---

# 1999: Could have worked at Zope Corp

![](assets/long-hair.png)

---

# 1999: Could have worked at Zope Corp

![inline full](assets/long-hair.png)

---

# What happened?

---

# [fit] Scheduled an interview

---

# [fit] At a :snake: company!

---

# [fit] However,

---

# [fit] this is 1999

---

![inline full](assets/long-hair.png)

---

# [fit] :snake:

# is a weird, obscure language

---

![inline full](assets/arlington-to-fredericksburg.png)

---


#  1999: Real coders use Java Enterprise! 

[.column]

Big companies were excited about Java

Back then unnecessary complexity was a virtue

Which affected the design of Zope

[.column]

![inline](assets/1024px-Jakarta_ee_logo_schooner_color_stacked_default.svg.png)

---

# Senior dev:

# "Python/Zope will be a MISTAKE"

---

# [fit] Cancelled interview!

---

## What I missed

## by cancelling an interview

![](assets/Guido_van_Rossum_OSCON_2006.jpg)

---

[.column]

### Zope hired all Python devs

![inline full](assets/zope-z-logo.png)

[.column]

### Including GvR in 2000!

![inline full](assets/Guido_van_Rossum_OSCON_2006.jpg)



---

[.column]

Lost the chance to work with Guido at the start of my career.

[.column]

![inline full](assets/Guido_van_Rossum_OSCON_2006.jpg)

---

[.column]

At a time when Python was so new Guido (and others experts there) spent untold hours lifting up people like me.

^ This would have been a huge career jump for me, instead of languishing for 7 years in enterprise environments.

[.column]

![inline full](assets/Guido_van_Rossum_OSCON_2006.jpg)

---

## Lessons Learned

1. Always go to the interview!
2. Don't listen to people who dismiss Python

<sub>[daniel.feldroy.com/posts/2010-01-my-pre-history-with-plone](https://daniel.feldroy.com/posts/2010-01-my-pre-history-with-plone)</sub>

---

# [fit] Second Mistake

---

[.background-color: #FF0000]
[.header: #FFFFFF, Avenir Next Bold]
[.text: #FFFFFF, Avenir Next Bold]

# 2.

# Unnecessary Sophistication

---

## Late 1990s to 2008-ish

---

# The Age of Zope

![](assets/zope-z-logo.png)

---

# What is Zope?

![inline full](assets/zope-z-logo.png)

---

# Zope used to dominate Python

- A web framework with its own NoSQL database
- Invented URL routing!
    - Before that was `index.pl` or `index.cfm`
- The vast majority of python web was Zope
- Zope track at PyCon!

---

# What happened to Zope?

Created in the era where complexity was added to projects to prove their worth and sell products about the project.

---

Making things public using Zope[^2]

```xml
<browser:page name="captcha.wav"
  for="captchad.interfaces.ICaptchaContainer"
  class="captchad.browser.folder.CaptchaAudio"
  permission="zope.Public" />

<browser:page
  name="captcha.png"
  for="captchad.interfaces.ICaptchaContainer"
  class="captchad.browser.folder.CaptchaImage"
  permission="zope.Public" />
```

[^2]: [https://daniel.feldroy.com/posts/2007-11-im-serving-out-image-and-audio-files](daniel.feldroy.com/posts/2007-11-im-serving-out-image-and-audio-files)

---

# What happened to Zope?

Becoming effective with Zope as a coder required:

- paid instruction or employment with core contributors
- xml configuration


---

# What happened to Zope?

Frameworks using Zope added too much clever complexity

- Plone
- Nuxeo

---

# Zope Hiring Story at NASA

[.column]

In 2008 at NASA my team rejected a candidate in part because he made the impossible claim to have learned, coded, and deployed a Zope-powered system within a month.

[.column]

![inline](assets/280_NASAMeatball.jpg)

---

# Example Zope Gotcha

Why the claim was impossible, Zope had many one-off quirks:

```python
from datetime.datetime import DateTime
from zope.schema import Datetime
from zope.schema import TextLine
```

[daniel.feldroy.com/posts/2007-11-head-meets-desk](https://daniel.feldroy.com/posts/2007-11-head-meets-desk)

---

[.code-highlight: 2]

# Example Zope Gotcha

Why the claim was impossible, Zope had many one-off quirks:

```python
from datetime.datetime import DateTime
from zope.schema import Datetime  # <-- Case
from zope.schema import TextLine
```

[daniel.feldroy.com/posts/2007-11-head-meets-desk](https://daniel.feldroy.com/posts/2007-11-head-meets-desk)

---

# Example Zope Gotcha

Why the claim was impossible, Zope had many one-off quirks:

```python
from datetime.datetime import DateTime
from zope.schema import Datetime  # <-- Case
from zope.schema import TextLine
```

[daniel.feldroy.com/posts/2007-11-head-meets-desk](https://daniel.feldroy.com/posts/2007-11-head-meets-desk)

---

[.build-lists: true]

## Unfortunate Zope community discourse

1. Coder: "This is really hard and the docs are incomplete"

2. Contributor 1: "Take my paid class to understand it"

3. Coder: "Can we not use XML so much?"

4. Contributor 2: "Here's more complexity and XML!"

5. Coder: "Bah! I'm going to use something else"

---

[.build-lists: true]

# My Zope story

1. 2007 - Zope is kind of neat
2. 2008 - Neat, but easy things are hard and hard things impossible
3. 2009 - This Django stuff allows me to get stuff done on schedule.

---

# The community

# drifted away



---

# Lessons learned

1. Complexity as a business model is bad
2. Overcomplicating your Python project to sell training and consulting and ensure job security bites you in the end

<!-- ---

# Some footnotes about Zope

1. Zope appears to have removed some of the unnecessary complexity
1. typing.Protocol is directly inspired Zope subtypes
1. I fond memories of working directly with ZPT and ZODB -->

---

# [fit] Third Mistake

---

[.background-color: #FF0000]
[.header: #FFFFFF, Avenir Next Bold]
[.text: #FFFFFF, Avenir Next Bold]

# 3.

# Overly clever hacks


---

# My obnoxiously clever hack

I defined my own numeric variables called `true` and `false`

```python
# business/logic.py
true = 0
false = 1
```

<!-- Use case: Vendor's API response! -->

Notice how these differ from the Python `True` and `False` booleans?

---

### Obnoxiously Clever!

```python
from business import logic, true, false

def process_result(vendorResponse):
    result = None
    for res in vendorResponse.results:
        if res.status == false:
            result = logic(res)
        if result.is_valid == True
            break
    return result
```

---

[.code-highlight: 6,8]

### My code confused everyone around me (including myself)

```python
from business import logic, true, false

def process_result(vendorResponse):
    result = None
    for res in vendorResponse.results:
        if res.status == false:
            result = logic(res)
        if result.is_valid == True
            break
    return result
```

--- 

# What I broke

# by reversing booleans


---

[.background-color: #000000]
[.header: #FFFFFF]


## What I broke by reversing booleans

![inline full](assets/production.png)

---

[.background-color: #000000]
[.header: #FFFFFF]

## Repeatedly

![inline full](assets/production.png)

---

[.background-color: #000000]
[.header: #FFFFFF]

## Often

![inline full](assets/production.png)

---

## A better approach

```python
class VendorStatus(enum):
    POSITIVE: int = 0
    NEGATIVE: int = 1
```

---

## A better approach

[.code-highlight: 6,8]

```python
from business import logic, VendorStatus

def process_result(vendorResponse):
    result = None
    for res in vendor_response.results:
        if res.status == VendorStatus.NEGATIVE:
            result = logic(res)
        if result.is_valid == True
            break
    return result
```

---

## What I learned:

1. Your Python code should be intuitive

2. Your code shouldn't require three cups of coffee to be understood

3. If it makes you think too hard, rewrite it such that a beginner can understand it

<!-- 1. Business rules are often complex
2. Code should remain as simple as possible
3. Be wary of coding culture that encourages complexity -->

---

# Fourth Mistake

---

[.background-color: #FF0000]
[.header: #FFFFFF, Avenir Next Bold]
[.text: #FFFFFF, Avenir Next Bold]

# 4.

# Django Cleverness

---

## 2012-era Django

[.column]

Dr. Ian Malcolm, Mathematician/Chaotician @ Jurassic Park


[.column]

![inline](https://media.giphy.com/media/mCClSS6xbi8us/giphy.gif)

---

# A short list of clever things

# promoted in talks and blogs

---

## Mistake: Database configuring installed apps

```sql
select app_path from apps where app_id = environ['APP_ID'];
```

```python
# Dynamically loaded INSTALL_APPS
INSTALLED_APPS += [x['app_path'] for x in records]
```

---

# Mistake: Removing None 

For languages without garbage collection, Tony Hoare said null pointer exceptions are a billion dollar mistake.

People added a clever class in a garbage collected language (Python) to replace it!

```python
class NoneError(Exeption):
    pass
```

Hint: This isn't helping

---

### Mistake: Metaclasses instead of object inheritance

This made no sense.

Also, unless you are writing a framework you probably will never use metaclasses

---

### Mistake: Architecture astronauting Django models

- Overly clever concrete model hacks
- Generic Foreign Keys for every model

---

[.build-lists: true]

# Mistake: Using random Python features that add abstraction unnecessarily

1. functools.partials are awesome!
1. Python decorators are awesome!
1. Let's combine them for use in asynchronous coding!

https://github.com/pydanny/webhooks

Hey, why doesn't anyone want to use my library?

---

# A lot of failing Django projects

---

[.build-lists: true]

# All our work is underpaid rescue work for Django

1. People code themselves into a corner using Django
2. Funding spent, original devs leave
2. We are invited to fix the problems on shoestring budgets

---

# If only people stopped the clever coding!

# [fit] :angry:

---

# There needs to be a guide for keep things reasonable

# [fit] 🤔

---

# Two Scoops of Django!

TODO: Put in all Two Scoops of Django covers

---

# Lesson Learned

We can address problems by writing and coding

---

[.background-color: #FF0000]
[.header: #FFFFFF, Avenir Next Bold]
[.text: #FFFFFF, Avenir Next Bold]

# 5.

# A New Complexity

---

# [fit] Python Types
<br>

# Problem or not?

---

> "I like types but they aren't always good"
<br><br>

> David Seddon

---

[.build-lists: true]

## Types can add significantly to cognitive load

- Simple types can make things easier

- But it's the edge cases that hurt

- Django is an edge case for Python types 

---

# For control of behaviors they are bliss

- FastAPI
- pydantic

---

# Types are decent at catching bugs

---

# [fit] But

---

Saying:

## "Types mean we can avoid writing tests"

---

Is the same as:


## "The ORM means our security is perfect" [^3]

[^3]: Crypto-dude at a hackathon in 2014

---

# Types can add complexity

---

### Types can add complexity[^4] (But I do love Protocols)

```python
class Box(Protocol):
      content: object

class IntBox:
      content: int

def takes_box(box: Box) -> None: ...

takes_box(IntBox())  # error: Argument 1 to "takes_box" has incompatible type "IntBox"; expected "Box"
                     # note:  Following member(s) of "IntBox" have conflicts:
                     # note:      content: expected "object", got "int"
```

[^4]: [mypy.readthedocs.io/en/stable/protocols.html#invariance-of-protocol-attributes](https://mypy.readthedocs.io/en/stable/protocols.html#invariance-of-protocol-attributes)

---

# Mypy is slow

## (Yes, I know there is a daemon)

1. If no cache, 93 lines of code takes me 5s
2. What if I'm testing millions of lines of Python

---

# Upgrading mypy

# can be really hard

---

# Pro-tip:

# keep mypy up-to-date

---

# Thought:

## Are Python types the Zope of the 2020s?

---

# I don't think so

---

# Unlike Zope...

---

# ...python typing has escape hatches

```python
from tying import Any

MyModel.name == generic_value  # type: ignore
```

---

[.background-color: #FF0000]
[.header: #FFFFFF, Avenir Next Bold]
[.text: #FFFFFF, Avenir Next Bold]

# 6.

# Not using Python for Good

---

# [fit] My work used for good

- People using it to land jobs
- Building dream projects
- Various community service efforts
  - Health care firms
  - Charities and non-profits
  - Catching terrorist bombers (Boston Marathon 2013)

---

[.background-color: #FF0000]
[.header: #FFFFFF, Avenir Next Bold]
[.text: #FFFFFF, Avenir Next Bold]

# [fit] But what about when

# [fit] my work is used for

# [fit] evil?

---

[.background-color: #FF0000]
[.header: #FFFFFF, Avenir Next Bold]
[.text: #FFFFFF, Avenir Next Bold]

# [fit] But what if my work was used for evil?

- Logistics for nations who oppress their people
- Commercial ventures to spy on private citizens
- Site promoting flat earth / no moon landings
- App to sell wildlife illegally
- Lots more

# :rage:

---

# [fit] Ethics in Code

[.column]

Dr. Ian Malcolm, Mathematician/Chaotician @ Jurassic Park


[.column]

![inline](https://media.giphy.com/media/mCClSS6xbi8us/giphy.gif)

---

# [fit] Questions we should ask

# [fit] of every employer/client

---

# [fit] Who is helped?

---

# [fit] Who is hurt?

---

# [fit] Does this project:

- Promote falsehood over truth?
- Subvert election processes?
- Intrude on individual sovreignty?
- Spew unnecessary carbon or methane into the atmosphere?

## In other words, does this hurt our future?

---

# [fit] Does this hurt our future?

Climate change is real

- A series of incrementally hotter years
- Heat waves around the world
- The South Western USA is under severe water restrictions

---

<sub>This isn't Southern California, rather Auburge, France 2022.</sub>

![inline fill](https://upload.wikimedia.org/wikipedia/commons/thumb/e/e4/Huveaune_Aubagne_dry_bed.jpg/2560px-Huveaune_Aubagne_dry_bed.jpg)

---

# [fit] It doesn't have to be this way...

---

## [fit] ...and here's why

---

![inline](assets/programming-supertpowers.png)

---

# [fit] Programming Gives Us Super Powers

[.column]

- To improve the lives of ourselves and our families
- To build new and innovative businesses
- To share ideas and knowledge around the world

[.column]

---

[.column]

# [fit] To save the planet

We have the power

[.column]


![inline full](https://upload.wikimedia.org/wikipedia/commons/thumb/c/cb/The_Blue_Marble_%28remastered%29.jpg/1920px-The_Blue_Marble_%28remastered%29.jpg)

---

[.background-color: #FF0000]
[.header: #FFFFFF, Avenir Next Bold]
[.text: #FFFFFF, Avenir Next Bold]

#### My impact on climate as an individual is tiny[^5]

[^5]: I am responsible for myself and ~1 other people

---

[.background-color: #00FF00]
[.header: #000000, Avenir Next Bold]
[.text: #000000, Avenir Next Bold]

# [fit] My climate impact as a software developer

# [fit] working on decarbonization and electrification

---

[.background-color: #00FF00]
[.header: #000000, Avenir Next Bold]
[.text: #000000, Avenir Next Bold]

# [fit] Gigantic[^6]

[^6]: I am responsible for ~60,000 people on renewable energy

---

[.build-lists: true]
[.background-color: #00FF00]

![inline](https://daniel.feldroy.com/images/uma-2020.png)

# [fit] This is going to be my legacy

---

[.background-color: #00FF00]

#### Join me in the good fight against climate change

[.column]

![](assets/climatebase.jpeg)

[climatebase.org](https://climatebase.org)

[.column]

![](assets/kraken-logo.png)

[octopus.energy/careers](https://octopus.energy/careers/)

---

# About Me

[.column]

Daniel Roy Greenfeld

Software Artisan @ Kraken Tech

Coder, Author, Leader

Husband of Audrey Roy Greenfeld

Father

Superhero saving the planet

[.column]

![fit](assets/facebook-avatar.jpg)

---

[.background-color: #FF0000]

# [fit] Questions

# [fit] 🤔

---